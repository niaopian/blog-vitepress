---
title: Linux学习
date: 2025-07-29 15:28:36
tags: Linux, RHCE9, 系统管理
---
# linux学习笔记 <Badge type="warning" text="beta" />
基于Centos7.9

## Linux 一级目录结构

| 目录       | 说明                                 |
|------------|------------------------------------|
| `/`        | 根目录，Linux目录结构的最顶级目录。   |
| `/boot`    | 存放系统的启动配置文件和内核文件。     |
| `/dev`     | 存放Linux的设备文件。                 |
| `/etc`     | 存放Linux的配置文件。                 |
| `/home`    | 存放普通用户的家目录。                 |
| `/mnt`     | 挂载点目录。                         |
| `/run`     | 挂载点目录。                         |
| `/opt`     | 存放软件文件。                       |
| `/proc`    | 存放进程文件。                       |
| `/srv`     | 存放资源文件。                       |
| `/tmp`     | 存放临时文件。                       |
| `/usr`     | 软件默认安装目录。                   |
| `/var`     | 存放日志文件。                       |


## 一、文件和目录管理

文件管理是操作系统的基础。本章介绍如何在 Linux 中查看、创建、编辑、复制、移动和删除文件和目录。

### 1.1 查看文件和目录

#### 基本命令 ls

| 命令                       | 说明                                      |
|----------------------------|-------------------------------------------|
| `ls`                       | 列出目录中的文件和子目录名                             |
| `ls -l`                    | 详细信息（权限、所有者、大小、时间等）                  |
| `ls -lh`                   | 以易读格式显示文件大小（KB, MB, GB）                   |
| `ls -d [目录名]`           | 查看目录自身属性而非内容                                  |
| `ls -t`                    | 按修改时间排序（最新优先）                               |
| `ls -rt`                   | 按修改时间逆序排序（最旧优先）                           |

#### 跳转目录 cd

| 命令           | 说明                 |
|----------------|----------------------|
| `cd -`         | 返回上一次所在目录         |

#### 查看当前路径 pwd

```bash
pwd
```

#### 查看文件内容 cat/echo/head/tail/more/less

| 命令                    | 说明                                               |
|-------------------------|----------------------------------------------------|
| `cat [文件路径]`         | 一次性输出整个文件内容                                      |
| `echo {a..z}`            | 依次输出从a到z的字符                                          |
| `head [文件路径]`        | 显示文件前10行                                         |
| `head -n 5 [文件路径]`   | 显示文件前5行                                         |
| `tail [文件路径]`        | 显示文件后10行                                         |
| `tail -f [文件路径]`     | 持续追踪文件的新内容（常用查看日志）                             |
| `more [文件路径]`        | 分页显示文件内容，只支持向后翻页，按空格或回车翻页，`q`退出               |
| `less [文件路径]`        | 分页显示文件内容，支持向前向后翻页和搜索                            |

---

### 1.2 创建文件和目录 touch/mkdir

| 命令                 | 说明                                   |
|----------------------|--------------------------------------|
| `touch [文件路径] `   | 创建空文件或更新已有文件的时间戳                   |
| `file [文件路径]`     | 查看文件类型                             |
| `mkdir [目录路径]`    | 创建新的目录                              |
| `mkdir -p [路径]`     | 递归创建目录，如果父目录不存在则一并创建                 |
| `mkdir -v [目录名]`   | 显示创建目录的过程（工作中一般不用）                      |

---

### 1.3 复制、移动和删除 cp/mv/rm/rmdir

| 命令                     | 说明                                                         |
|--------------------------|--------------------------------------------------------------|
| `cp [源文件] [目标]`     | 复制文件或目录                                                   |
| `cp -r [目录] [目标]`    | 递归复制整个目录                                                |
| `cp -p`                  | 复制时保存文件属性                                              |
| `cp -d`                  | 复制软链接                                                    |
| `cp -a`                  | 归档模式，保留所有属性（权限、所有者、时间戳），通常需root权限             |
| `mv [源] [目标]`         | 移动文件或目录，或重命名                                         |
| `rm [文件]`              | 删除文件                                                     |
| `rm -r [目录]`           | 递归删除目录及内容                                             |
| `rm -f [文件]`           | 强制删除，不显示提示                                            |
| `rmdir [空目录]`         | 删除空目录（仅能删除空目录，较少使用）                             |

> **注意**：root 用户一般系统默认为 `rm` 命令设置了带交互的别名（如 `rm -i`），防止误删。

---

### 1.4 Vim 文本编辑器基础

Vim 是功能强大的文本编辑器，具有三种基本操作模式：

| 模式         | 功能                          | 进入方式                        |
|--------------|-------------------------------|--------------------------------|
| 命令模式     | 基本光标移动、编辑命令                | 启动 Vim 即默认进入该模式               |
| 插入模式     | 编辑文本                        | 在命令模式下按 `i`, `a`, `o` 等进入          |
| 末行模式     | 执行保存、退出、替换等命令           | 命令模式下按 `:` 进入                    |
| 可视化模式   | 选中文本对块操作                     | 命令模式下按 `v`, `V`, `Ctrl+v` 进入        |

#### 命令模式常用快捷键

| 命令       | 说明                                   |
|------------|----------------------------------------|
| `h` `j` `k` `l` | 光标左、下、上、右移动                       |
| `^` `$`    | 行首，行尾                              |
| `gg` `G` `3G` | 跳转至首行、尾行、第3行                    |
| `x` `X`   | 删除光标所在字符，删除光标前字符                   |
| `dd` `5dd` | 删除当前行，和起始的5行                            |
| `yy` `5yy` | 复制当前行及往下5行                              |
| `u`       | 撤销                                    |
| `p`       | 粘贴                                    |
| `i` `I` `a` `A` `o` `O` | 进入插入模式，各种插入点：光标左、行首、右、行尾、下一行、上一行 |

#### 末行模式命令示例

| 命令                         | 说明                                       |
|------------------------------|--------------------------------------------|
| `:set number` 或 `:set nu`    | 显示行号                                    |
| `:set nonumber`               | 关闭行号                                    |
| `:%s/old/new/g`               | 全文替换，将所有old替换成new                    |
| `:1,$s/old/new/g`             | 指定范围替换，从第1行到最后一行进行替换             |
| `:%s/old/new/`                | 替换每行第一个匹配old为new                       |
| `/关键字`                     | 向下搜索关键字                                   |
| `?关键字`                     | 向上搜索关键字                                   |
| `n`                          | 继续上次搜索，向下                                |
| `N`                          | 继续上次搜索，向上                                |

#### 可视化模式

| 进入方式    | 说明                              |
|-------------|-----------------------------------|
| `v`         | 进入字符可视化模式                  |
| `V`         | 进入行可视化模式                    |
| `Ctrl + v`  | 进入块（矩形）可视化模式             |

---

## 二、Shell 核心特性

介绍 Shell 的重定向、管道、别名、通配符等基础而强大的特性。

### 2.1 输入输出重定向

| 符号           | 作用                                   | 示例                                   |
|----------------|---------------------------------------|----------------------------------------|
| `>`            | 标准输出重定向（覆盖写入）               | `ls -l > file.txt`                      |
| `>>`           | 标准输出重定向（追加写入）               | `echo "hello" >> file.txt`              |
| `2>`           | 标准错误重定向（覆盖写入）               | `command 2> error.log`                   |
| `2>>`          | 标准错误重定向（追加写入）               | `command 2>> error.log`                  |
| `&>` 或 `&>>`  | 同时重定向标准输出和标准错误               | `command &> all.log`                     |
| `/dev/null`    | “黑洞”，输出被丢弃                       | `command > /dev/null 2>&1`               |
| `<`            | 输入重定向                              | `mail -s "sub" user < file.txt`          |

**Here Document 示例**

`<<END`允许在命令行中直接提供多行输入，直到遇到终止符

```bash
cat > /etc/hosts <<END
192.168.1.1 xiaomi.com
END
```

---

### 2.2 管道（Pipes）

将一个命令的输出直接作为另一个命令的输入。

- 常见命令 `grep` 用法：

| 选项  | 说明                                  | 示例                             |
|-------|-------------------------------------|---------------------------------|
| `-i`  | 忽略大小写                          | `grep -i localhost /etc/hosts`  |
| `-v`  | 反向匹配                          | `grep -v error log.txt`          |
| `-n`  | 显示行号                          | `grep -n "pattern" file`         |
| `-A n`| 显示匹配行以及后面n行内容              | `grep -A 3 "pattern" file`       |
| `-B n`| 显示匹配行以及前面n行内容              | `grep -B 3 "pattern" file`       |

- `xargs` 示例：

```bash
ls | xargs cat  # 将 ls 的输出作为 cat 的参数批量查看多个文件
```

---

### 2.3 命令别名 (alias)

简化复杂命令，提高效率。

```bash
# 查看所有别名
alias

# 设置临时别名(当前shell有效)
alias ll='ls -l -h'
```

永久生效需写入 `~/.bashrc`。

---

### 2.4 通配符与正则表达式基础

| 类型         | 语法          | 示例                        | 说明                             |
|--------------|---------------|-----------------------------|----------------------------------|
| 通配符       | `?`           | `a?b`                      | 匹配单个任意字符                   |
|              | `*`           | `a*b`                      | 匹配任意长度任意字符                |
|              | `[]`          | `a[bcd]b`                  | 匹配括号指定任一字符                |
|              | `[^]`         | `a[^1b]c`                  | 匹配不在括号内字符                  |
|              | `\`           | `\*`                       | 转义特殊字符                      |
| 正则表达式   | `^`           | `^#`                       | 行首匹配                         |
|              | `$`           | `$`                        | 行尾匹配                         |
|              | `.`           | `a.c`                      | 匹配任意单一字符                   |
|              | `.*`          | `a.*c`                     | 匹配任意长度任意字符                |
|              | `?`           | `colou?r`                  | 匹配前一个字符0或1次                |

---

### 2.5 Shell 常用快捷键

| 快捷键        | 说明                             |
|---------------|----------------------------------|
| Ctrl + L      | 清屏（等于 clear）                |
| Ctrl + D      | 退出当前用户             			   |
| Ctrl + A      | 将光标移动到行首                  |
| Ctrl + E      | 将光标移动到行尾                  |
| Ctrl + U      | 删除光标到行首内容                |
| Ctrl + K      | 删除光标到行尾内容                |
| Ctrl + W      | 删除光标前一个单词                |
| Ctrl + Y      | 粘贴 Ctrl+U 或 Ctrl+W 删除内容   |
| Ctrl + S      | 屏幕锁定                        |
| Ctrl + Q      | 屏幕解锁                        |
| Ctrl + Z      | 后台挂起当前任务                  |
| Esc + .       | 引用上次命令参数                  |
| history      | 查看命令历史                     |

---

## 三、用户和组管理

### 3.1 用户管理

| 命令                          | 说明                                   |
|------------------------------|----------------------------------------|
| `useradd [用户名]`            | 新增用户                                |
| `useradd -u [UID] 用户名`    | 指定UID              		   					 |
| `useradd -s /bin/bash 用户名` | 指定命令解释器,默认是/bin/bash         |
| `useradd -g [组名] 用户名`    | 指定主组                                |
| `useradd -M 用户名`  			  | 不创建家目录              	  					 |
| `useradd -G [组名] 用户名`    | 指定附加组                              |
| `usermod`                    | 修改用户信息                            |
| `userdel [用户名]`            | 删除用户                                |
| `userdel -r 用户名`           | 删除用户及家目录                         |
| `id [用户名]`                 | 查看用户 UID、GID 和组信息                 |

### 3.2 组管理

| 命令                         | 说明                                |
|-----------------------------|-------------------------------------|
| `groupadd [组名]`            | 新建用户组                           |
| `groupmod`                   | 修改组信息                         |
| `groupdel [组名]`            | 删除组                              |
| `gpasswd`                   | 管理组成员和密码                     |
| `gpasswd -a 用户 组`         | 将用户添加到组                      |
| `gpasswd -d 用户 组`         | 从组中移除用户                      |

### 3.3 密码管理

| 命令                           | 说明                                   |
|--------------------------------|---------------------------------------|
| `passwd [用户名]`               | 设置/修改密码                           |
| `passwd -d 用户名`             | 删除密码，无密码登录                     |
| `passwd -l 用户名`             | 锁定账户                               |
| `passwd -u 用户名`             | 解锁账户                               |
| `passwd -e 用户名`             | 强制密码过期，下次登录需修改密码           |
| `passwd --stdin 用户名 密码`  	 | 非交互式设置密码        						    |
| `chage`                       | 管理密码策略和有效期                     |
| `chage -m`                    | 密码最短天数                           |
| `chage -M`                    | 密码最长天数                           |
| `chage -W`                    | 密码到期前警告天数                       |
| `chage -I`                    | 密码过期后宽限天数                       |
| `chage -E`                    | 账户失效日期                           |

* **`gpasswd [组名]`**: 为用户组设置密码。
* **`newgrp [组名]`**: 临时切换当前会话的主组。如果目标组设置了密码且当前用户不是其成员，则需要输入组密码才能切换。

### 3.4 相关配置文件

| 文件            | 说明                                |
|-----------------|------------------------------------|
| `/etc/passwd`   | 用户基本信息记录（不含明文密码，显示 `x` 代替） |
| `/etc/shadow`   | 用户加密密码和密码有效期等安全信息         |
| `/etc/group`    | 组信息                              |
| `/etc/gshadow`  | 组密码及管理信息                      |

---

## 四、权限管理

### 4.1 标准权限模型 (rwx)

| 权限位示例          | 含义                      |
|---------------------|---------------------------|
| `-rwxr-xr--`        | 普通文件，所有者rwx，组r-x，其他r-- |

- 权限主体分三组：

| 组别     | 代表对象                   |
|----------|----------------------------|
| u（user）| 文件所有者                 |
| g（group）| 文件所属组                |
| o（other）| 其他用户                  |

- 权限含义：

| 权限  | 文件领域说明                 | 目录领域说明                      |
|-------|-----------------------------|----------------------------------|
| r     | 读取文件内容                 | 查看目录内容                     |
| w     | 修改文件内容                 | 创建、删除、重命名目录内文件        |
| x     | 执行文件                     | 进入目录，访问目录下内容的条件       |

### 4.2 修改权限与所有者

- **chmod**

```bash
chmod u=rwx,g=rx,o=r 文件名     # 符号模式
chmod 754 文件名                # 数字模式(7=rwx,5=rx,4=r)
```

- **chown**

```bash
chown 用户 文件/目录
chown 用户:组 文件/目录   # 同时修改用户和组
```
查看文件的内容 文件要有r权限.
编辑或修改文件内容 文件要有rw权限.
执行脚本/命令 文件需要有rx权限.
创建文件,删除文件 文件所在目录要有rwx权限
查看目录内容 目录要有rx权限
重命名 文件所在目录要有rwx权限

- **chgrp**

```bash
chgrp 组 文件/目录
```

### 4.3 umask 默认权限

| 文件类型 | 最大权限   |
|----------|------------|
| 文件     | 666 (-rw-rw-rw-) |
| 目录     | 777 (drwxrwxrwx) |

- 运算方式：

```text
默认权限 = 最大权限 - umask掩码
```

- 查看：

```bash
umask
```

- 例：

`umask 0022`，文件默认权限 `666 - 022 = 644`，目录默认权限 `777 - 022 = 755`。

### 4.4 特殊权限

| 特殊权限  | 说明                                           | 设置例子                       |
|-----------|------------------------------------------------|-------------------------------|
| SetUID    | 执行文件时临时具有文件所有者权限（如`passwd`）    | `chmod u+s 文件` 或 `chmod 4755 文件` |
| SetGID    | 新文件继承目录所属组；执行时临时具有文件组权限     | `chmod g+s 目录` 或 `chmod 2755 目录` |
| Sticky Bit| 目录内文件只能被文件所有者或root删除（如 `/tmp`） | `chmod +t 目录` 或 `chmod 1777 目录`   |

- 若执行权限缺失，特殊权限显示为大写 `S` 或 `T`。

### 4.5 访问控制列表 ACL

| 命令                      | 作用                              | 示例                                       |
|---------------------------|----------------------------------|------------------------------------------|
| `setfacl -m u:用户名:rwx 文件`| 修改/添加ACL                        | `setfacl -m u:hzz:r test/`               |
| `setfacl -x u:用户名 文件`  | 删除指定ACL                        |                                          |
| `setfacl -b 文件`           | 清除所有ACL权限                    |                                          |
| `setfacl -m d:u:用户名:rwx 目录/`| 设置默认ACL，新文件继承                |                                          |
| `getfacl 文件`              | 查看ACL详细信息                    |                                          |

- 若文件设置ACL，`ls -l` 权限位后显示 `+`。

### 权限委派（sudo）

- `/etc/sudoers` 配置示例：

```text
visudo														# 等价于vim /etc/sudoers

tgb ALL=(ALL) ALL                 # tgb用户可执行任意命令
%tgb ALL=(ALL) ALL                # tgb组内用户可执行任意命令
tgb ALL=/sbin/useradd             # tgb用户仅限运行useradd命令
%tgb ALL=(ALL) NOPASSWD: ALL      # tgb组内用户无需密码执行任意命令
```

- 自动化（如 ansible）推荐普通用户通过 sudo 提权运行，避免直接使用 root。

---

## 五、系统配置相关

### 修改主机名

```bash
hostnamectl set-hostname localhost
hostname  # 查看当前主机名
```

### 主机名和IP映射

- `/etc/hosts`

### 网络配置

- 配置路径：`/etc/sysconfig/network-scripts/ifcfg-eth0`

- 重新启动网络：

```bash
systemctl restart network
```

- 可在 `/boot/grub2/grub.cfg` 加入 `net.ifnames=0 biosdevname=0` 禁用新命名方式，在linux16那两行添加，再用 `nmtui` 修改名称。

### 开机自启动 `/etc/rc.local`

- 添加执行权限：

```bash
chmod +x /etc/rc.d/rc.local
```
* /etc/rc.local本质是个快捷方式(软连接), 源文件是/etc/rc.d/rc.local

---

### 自动挂载配置

- 文件路径 `/etc/fstab`

### 登录信息文件

| 文件              | 说明                                 |
|-------------------|------------------------------------|
| `/etc/motd`       | 登录后显示的消息                      |
| `/etc/issue`      | 登录前显示的信息                      |
| `/etc/issue.net`  | 网络登录前显示信息                    |

- 新装系统通常显示详细版本信息，一般要删掉不给别人看，或者写入固定不变的系统信息给人看：

```bash
> /etc/issue
```

---

### 系统日志路径 `/var/log`

| 日志文件                   | 内容说明                        |
|----------------------------|-------------------------------|
| `/var/log/secure`          | 用户登录安全日志                  |
| `/var/log/messages`        | 系统服务和异常日志                |

---

### `/proc` 虚拟文件系统

| 文件路径         | 说明                  |
|------------------|-----------------------|
| `/proc/cpuinfo`  | CPU详细信息           |
| `/proc/meminfo`  | 内存信息               |
| `/proc/loadavg`  | 系统负载               |

- `lscpu` 查看CPU结构，socket表示CPU颗数。

---

### 常用命令汇总

| 命令           | 作用                          |
|----------------|-------------------------------|
| `head` `tail`  | 查看文件开头和结尾             |
| `less` `more`  | 分页查看文件                   |
| `wc -l`        | 统计行数                      |
| `which` `whereis` | 查看命令是否存在，在哪里，查看别名 |
| `diff` `vimdiff`| 文件对比                      |
| `sort` `uniq`  | 排序与去重                     |
| `date`         | 日期时间显示及格式化            |
| `ntpdate`      | 时间同步                      |
| `timedatectl`  | 时间和时区设置                  |

查看日志不应该使用cat、vim。使用cat会刷屏，停不下来。使用vim会将文件从磁盘加载到内存，使得内存不足

sort	字符对比1-11-2-35-4-9.9-9999

​	-n	按数字大小对比

​	-r	逆序排序

​	-k	指定某一列，根据某一列进行排序

​	-t	指定分隔符,只能指定1个字符. 默认是空格

uniq	相邻两行去重，一般先要sort排序再去重

​	-c	去重并显示次数

date

​	+%F

​	+%Y-%m-%d

​	+%T

​	+%H:%M:%S

​	+%w	星期几

​	-d '20250801 12:00:00'	-d显示指定日期

ntpdate ntp1.aliyun.com	ntp服务器同步时间

查看时间信息：timedatectl status

修改时区： timedatectl set-timezone Asia/Shanghai



给备份文件名添加时间

touch backup-etc-`date +%F'.txt

---

### inode 和 block

- inode 保存文件类型、权限、硬链接、所有者、文件大小、修改时间、block位置的信息。  
- block 存储实际文件内容。

查看磁盘使用：

```bash
df -h    # 块使用情况
df -i    # inode 使用情况
```

---

### 文件类型（`ls -l` 第一列字符）

| 标识符 | 类型                                 |
| ------ | ------------------------------------ |
| `-`    | 普通文件                             |
| `d`    | 目录                                 |
| `l`    | 软链接                               |
| `c`    | 字符设备 char 特殊文件,不断输出,吸入 |
| `b`    | 块设备                               |
| `s`    | 套接字 socket文件                    |
| `p`    | 管道文件                             |

---

### 软硬链接命令

```bash
ln -s 源文件 软链接文件    # 软链接
ln 源文件 硬链接文件      # 硬链接
```

---

### 查看目录大小

```bash
du -sh /etc/    # 汇总人类可读格式显示
```

选项：

- `-h`：人类可读形式显示大小
- `-s`：仅显示汇总，不递归展开所有子目录

---

### 文件时间属性

| 时间属性   | 说明             |
|------------|------------------|
| mtime      | 文件内容修改时间  |
| atime      | 文件最后访问时间  |
| ctime      | 文件属性变化时间  |

查看文件详细信息：

```bash
stat 文件名
```

---

### 打包与压缩

- **tar**

| 命令                              | 说明                    |
|---------------------------------|-------------------------|
| `tar zcf file.tar.gz ...`        | 创建 gzip 压缩包         |
| `tar tf file.tar.gz`             | 查看包内容               |
| `tar xf file.tar.gz`             | 解压包                   |
| `tar xf file.tar.gz -C 目标目录` | 解压到指定目录           |

v verbose 显示过程

c create 创建包(打包)

z gzip tar命令创建包后，通过gzip压缩工具进行压缩

最终扩展名.tar.gz

f file 指定压缩包,f选项放在这几个选项的最后

t list 列表,查看压缩包内容.

x extract 解压

\-C 解压到指定目录

tar xf 压缩包 -C 解压后的存放目录	解压到指定目录

- **gzip**

```bash
gzip 文件				#创建压缩包
gzip -d 文件.gz	#解压压缩包
```

- **zip/unzip**

```bash
yum install -y unzip
zip -r etc.zip /etc/	#-r用于压缩目录
unzip etc.zip
```

---

### grep 常用选项

| 选项  | 说明                     |
|-------|--------------------------|
| `-n`  | 显示行号                 |
| `-v`  | 排除匹配行（取反）         |
| `-i`  | 忽略大小写               |

---

### find 使用总结

| 选项               | 说明                                       |
|-------------------|------------------------------------------|
| `-type f/d`       | 查找文件或目录                             |
| `-name '*.txt'`   | 文件名匹配，支持通配符                        |
| `-iname`          | 忽略大小写匹配文件名                         |
| `-size +10M`      | 文件大于10兆字节                            |
| `-mtime -7`       | 最近7天内修改文件                            |
| `-mtime +7`       | 超过7天前修改文件                            |
| `-maxdepth 1`     | 限制最大深度为1层                            |

- 使用管道和 `xargs` 是否可行注意事项：

```bash
find /oldboy/find/ -type f -name '*.txt' | xargs ls -lh
```
默认管道是无法把数据变化为命令的参数，导致传递失败
这个命令(ls)中传递文字符号就不行,传递的是参数

|xargs把前面命令传递过来的字符串转换为后面命令可以识
别参数.

- `-exec` 使用示例：

```bash
find /oldboy/find/ -type f -name '*.txt' -exec ls -lh {} \;
```
-exec是find选项,表示find找出文件后要执行的命令
{} 表示前面find命令找出的文件.
\;表示命令结束,固定格式.





# 软件包管理

yam/apt  有依赖自动下载依赖并安装

rpm/dpkg 手动下载rpm包,手动安装rpm包,缺少依赖需要自己解决

二进制安装 解压既用，一般是服务,数据库，k8s，promethues监控

自编译安装 可以自定义安装,比较漫长,缺少依赖自己解决，可以软件自定义，增加功能

## rpm

安装

```bash
wget --no-check-certificate -P /server/tools/ https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/6.0/rhel/7/x86_64/zabbi-agent2-6.0.0-1.el7.x86_64.rpm
		 -P							#下载到指定目录
		 
rpm -ivh zabbi-agent2-6.0.0-1.el7.x86_64.rpm
rpm -ivh xxx.rpm		#安装
		-i							#install
		-v							#显示过程
		-h							#人类可读形式显示过程
		
		
rpm -qa |grep zabbix
rpm -qa	zabbix-agent2		#查看软件包是否安装
		-ql									#查看软件包内容

rpm -qf 文件或命令绝对路径	#用于查找已经安装命令或文件属于哪个软件包
												#还可以使用yum provides命令查找
		-Uvh								#升级软件包(如果软件包不存在,相当是ivh安装)
		-e									#删除软件包
		
		
		
		
```

## yum

命令补全工具

```
bash-completion bash-completion-extras
```



```
yum命令配置文件：/etc/yum.conf
yum源：存放软件包地方, 配置目录/etc/yum.repos.d/*.repo repository源
```



repo配置文件格式

```
[base] 这个源的名字
name=CentOS-$releasever - Base - mirrors.aliyun.com
failovermethod=priority
baseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/
				http://mirrors.aliyuncs.com/centos/$releasever/os/$basearch/
				http://mirrors.cloud.aliyuncs.com/centos/$releasever/os/$basearch/
gpgcheck=1
gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7
```

[base] 					 yum源的名字
name= 					说明信息
baseurl= 				     yum源地址,打开后要看到repodata目录,这是yum配置的核心.
enabled=1 				  是否开启这个yum源
gpgcheck=1 				开启软件包检查,未来自建yum仓库可以关闭.
gpgkey 					 用于检查的秘钥. 如果关闭检查gpgkey省略.



配置源

````
阿里云
#配置base源
mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
#增强yum源 epel源 ()
yum install -y wget
wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo

替换清华源
vim进入 CentOS-Base.repo epel.repo
:%s#http://mirrors.aliyun.com#https://mirrors.tuna.tsinghua.edu.cn#g
:%s#找啥#替换成啥#g
:1,20s#找啥#替换成啥#g

````



安装
yum install -y tree
重新安装软件包
yum reinstall -y tree

找出这个命令或文件属于的软件包
yum provides 命令或文件
根据名字或内容搜索软件
yum search all tree

查看yum源信息
yum repolist 

显示yum仓库中所有软件
yum list

删除
yum remove 删除软件包及依赖	不推荐使用,会删除依赖,如果要删除推荐使用 rpm -e
yum clean all 清空缓存	自建yum仓库需要使用
更新
yum update/upgrade
